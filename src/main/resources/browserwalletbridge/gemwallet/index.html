<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="data:;base64,=">
    <title>GemWallet</title>
    <script src="https://unpkg.com/@gemwallet/api@2.2.1/umd/gemwallet-api.js"></script>
    <script type="text/javascript"  src="/send/common/walletbridge.js"></script>
    <style>
        body {
            font: 16px Helvetica, sans-serif;
        }
    </style>
</head>
<body>
</body>

<script type="text/JavaScript">

function onLoad() {
    var bridge = new WalletBridge('GemWallet', 'https://gemwallet.app')
    if(!bridge.init()) {
        return
    }

    GemWalletApi.isConnected().then((isConnected) => {
        if(!isConnected) {
            bridge.hide('waiting')
            bridge.show('walletApiNotAvailable')
            return;
        }

        GemWalletApi.sendPayment(bridge._tx).then((txHash) => {
            bridge.hide('waiting')
            if(txHash == null) {
                bridge.show('rejected')
                bridge.reportFailure('user_rejected', 'User rejected to sign the payment.')
            } else {
                bridge.show('success')
                bridge.reportSuccess(txHash)
            }
        });
    });
}

window.addEventListener("load", onLoad);

</script>
</html>